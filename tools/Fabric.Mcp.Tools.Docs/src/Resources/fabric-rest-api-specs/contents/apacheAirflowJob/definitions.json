{
    "swagger": "2.0",
    "info": {
        "title": "Apache Airflow job data types",
        "version": "v1"
    },
    "paths": {},
    "definitions": {
        "ApacheAirflowJob": {
            "description": "An Apache Airflow job object.",
            "type": "object",
            "required": ["type"],
            "allOf": [
                {
                    "$ref": "../common/definitions.json#/definitions/Item"
                }
            ]
        },
        "ApacheAirflowJobs": {
            "description": "A list of Apache Airflow job objects.",
            "required": ["value"],
            "type": "object",
            "properties": {
                "value": {
                    "description": "A list of Apache Airflow job objects.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/ApacheAirflowJob"
                    }
                }
            },
            "allOf": [
                {
                    "$ref": "../common/definitions.json#/definitions/PaginatedResponse"
                }
            ]
        },
        "CreateApacheAirflowJobRequest": {
            "description": "Create request payload.",
            "required": ["displayName"],
            "properties": {
                "displayName": {
                    "description": "The Apache Airflow job display name. The display name must follow naming rules according to item type.",
                    "type": "string",
                    "readOnly": false
                },
                "description": {
                    "description": "The Apache Airflow job description. Maximum length is 256 characters.",
                    "type": "string",
                    "readOnly": false
                },
                "folderId": {
                    "description": "The folder ID. If not specified or null, the Apache Airflow is created with the workspace as its folder.",
                    "type": "string",
                    "format": "uuid",
                    "readOnly": false
                },
                "definition": {
                    "description": "The Apache Airflow job public definition.",
                    "$ref": "#/definitions/ApacheAirflowJobDefinition",
                    "readOnly": false
                }
            }
        },
        "UpdateApacheAirflowJobDefinitionRequest": {
            "description": "Update public definition request payload.",
            "required": ["definition"],
            "properties": {
                "definition": {
                    "$ref": "#/definitions/ApacheAirflowJobDefinition"
                }
            }
        },
        "ApacheAirflowJobDefinitionResponse": {
            "description": "Apache Airflow job public definition response.",
            "required": ["definition"],
            "properties": {
                "definition": {
                    "$ref": "#/definitions/ApacheAirflowJobDefinition",
                    "readOnly": true
                }
            }
        },
        "ApacheAirflowJobDefinition" : {
            "description": "Apache Airflow job public definition object.",
            "type": "object",
            "required": ["parts"],
            "properties": {
                "parts": {
                    "description": "A list of definition parts.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/ApacheAirflowJobDefinitionPart"
                    },
                    "readOnly": false
                }
            }
        },
        "ApacheAirflowJobDefinitionPart": {
            "description": "Apache Airflow job public definition part object.",
            "type": "object",
            "properties": {
                "path": {
                    "description": "The public definition part path.",
                    "type": "string",
                    "readOnly": false
                },
                "payload": {
                    "description": "The public definition part payload.",
                    "type": "string",
                    "readOnly": false
                },
                "payloadType":{
                    "description": "The payload type.",
                    "$ref": "../common/definitions.json#/definitions/PayloadType",
                    "readOnly": false
                }
            }
        },
        "UpdateApacheAirflowJobRequest": {
            "description": "Update Apache Airflow job request.",
            "properties": {
                "displayName": {
                    "description": "The Apache Airflow job display name. The display name must follow naming rules according to item type.",
                    "type": "string",
                    "readOnly": false
                },
                "description": {
                    "description": "The Apache Airflow job description. Maximum length is 256 characters.",
                    "type": "string",
                    "readOnly": false
                }
            }
        },
        "ApacheAirflowJobFileMetadata": {
            "description": "Apache Airflow job file metadata.",
            "type": "object",
            "required": [
                "filePath",
                "sizeInBytes"
            ],
            "properties": {
                "filePath": {
                    "description": "The file path relative to the Apache Airflow job root. It must begin with either 'dags/' or 'plugins/' (for example, `dags/example_dag.py`).",
                    "type": "string",
                    "readOnly": true
                },
                "sizeInBytes": {
                    "description": "The file size, in bytes.",
                    "type": "integer",
                    "format": "int64",
                    "readOnly": true
                }
            }
        },
        "ApacheAirflowJobFiles": {
            "description": "A list of Apache Airflow job files.",
            "type": "object",
            "required": [
                "value"
            ],
            "properties": {
                "value": {
                    "description": "A list of Apache Airflow job files.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/ApacheAirflowJobFileMetadata"
                    },
                    "readOnly": true
                }
            },
            "allOf": [
                {
                    "$ref": "../common/definitions.json#/definitions/PaginatedResponse"
                }
            ]
        },
        "AirflowWorkspaceSettings": {
            "type": "object",
            "description": "Apache Airflow workspace settings.",
            "properties": {
                "defaultPoolTemplateId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "The default pool template ID for the workspace."
                }
            }
        },
        "UpdateAirflowWorkspaceSettingsRequest": {
            "type": "object",
            "description": "Update Apache Airflow workspace settings request payload.",
            "properties": {
                "defaultPoolTemplateId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "The default pool template ID for the workspace."
                }
            }
        },
        "AirflowPoolTemplate": {
            "description": "Apache Airflow pool template.",
            "type": "object",
            "properties": {
                "id": {
                    "format": "uuid",
                    "description": "The pool template ID.",
                    "type": "string",
                    "readOnly": true
                },
                "name": {
                    "description": "The pool template name.",
                    "type": "string"
                },
                "nodeSize": {
                    "description": "The node size.",
                    "$ref": "#/definitions/NodeSize"
                },
                "shutdownPolicy": {
                    "description": "The shutdown policy.",
                    "$ref": "#/definitions/ShutdownPolicy",
                    "readOnly": true
                },
                "computeScalability": {
                    "$ref": "#/definitions/ComputeScalability",
                    "description": "Compute scalability settings."
                },
                "apacheAirflowJobVersion": {
                    "description": "The Apache Airflow job version.",
                    "type": "string"
                }
            }
        },
        "AirflowPoolTemplates": {
            "required": ["value"],
            "type": "object",
            "properties": {
                "value": {
                    "description": "A list of Apache Airflow pool templates.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/AirflowPoolTemplate"
                    }
                }
            },
            "allOf": [
                {
                    "$ref": "../common/definitions.json#/definitions/PaginatedResponse"
                }
            ]
        },
        "CreateAirflowPoolTemplateRequest": {
            "description": "Create Apache Airflow pool template request payload.",
            "required": [
                "name",
                "nodeSize",
                "computeScalability",
                "apacheAirflowJobVersion"
            ],
            "type": "object",
            "properties": {
                "name": {
                    "description": "The pool template name.",
                    "type": "string"
                },
                "nodeSize": {
                    "description": "The node size.",
                    "$ref": "#/definitions/NodeSize"
                },
                "computeScalability": {
                    "$ref": "#/definitions/ComputeScalability",
                    "description": "Compute scalability settings."
                },
                "apacheAirflowJobVersion": {
                    "description": "The Apache Airflow job version (e.g., '1.0.0').",
                    "type": "string"
                }
            }
        },
        "NodeSize": {
            "type": "string",
            "description": "Node size. Additional `NodeSize` types may be added over time.",
            "enum": ["Small", "Large"],
            "x-ms-enum": {
                "name": "NodeSize",
                "modelAsString": true,
                "values": [
                    {
                        "value": "Small",
                        "description": "Small node size"
                    },
                    {
                        "value": "Large",
                        "description": "Large node size"
                    }
                ]
            }
        },
        "ShutdownPolicy": {
            "type": "string",
            "description": "Shutdown policy. Additional `ShutdownPolicy` types may be added over time.",
            "enum": ["AlwaysOn", "OneHourInactivity"],
            "x-ms-enum": {
                "name": "ShutdownPolicy",
                "modelAsString": true,
                "values": [
                    {
                        "value": "AlwaysOn",
                        "description": "Always on"
                    },
                    {
                        "value": "OneHourInactivity",
                        "description": "Shutdown after one hour of inactivity"
                    }
                ]
            }
        },
        "ComputeScalability": {
            "description": "Compute scalability properties.",
            "required": [
                "minNodeCount",
                "maxNodeCount"
            ],
            "type": "object",
            "properties": {
                "minNodeCount": {
                    "description": "The minimum node count. The minimum value is always 5.",
                    "format": "int32",
                    "type": "integer",
                    "minimum": 5
                },
                "maxNodeCount": {
                    "description": "The maximum node count.",
                    "format": "int32",
                    "type": "integer",
                    "minimum": 5
                }
            }
        }
    }
}
