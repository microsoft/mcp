{
    "swagger": "2.0",
    "info": {
        "title": "Environment data types",
        "version": "v1"
    },
    "paths": {},
    "definitions": {
        "EnvironmentSparkComputePreview": {
            "type": "object",
            "properties": {
                "instancePool": {
                    "description": "Environment pool has to be a valid custom pool. \"Starter Pool\" means use starter pool.",
                    "$ref": "#/definitions/InstancePool"
                },
                "driverCores": {
                    "description": "Spark driver core. Must be one of the following values: 4, 8, 16, 32, 64.",
                    "format": "int32",
                    "type": "integer"
                },
                "driverMemory": {
                    "description": "Spark driver memory.",
                    "type": "string"
                },
                "executorCores": {
                    "description": "Spark executor core. Must be one of the following values: 4, 8, 16, 32, 64.",
                    "format": "int32",
                    "type": "integer"
                },
                "executorMemory": {
                    "description": "Spark executor memory.",
                    "type": "string"
                },
                "dynamicExecutorAllocation": {
                    "description": "Dynamic executor allocation.",
                    "$ref": "#/definitions/DynamicExecutorAllocationProperties"
                },
                "sparkProperties": {
                    "type": "object",
                    "description": "Spark properties. The dictionary-based contract for defining Spark properties will be deprecated on January 31, 2026. Please migrate to using a list of key-value pairs instead."
                },
                "runtimeVersion": {
                    "description": "Runtime version, find the supported [fabric runtimes](/fabric/data-engineering/runtime).",
                    "type": "string"
                }
            }
        },
        "UpdateEnvironmentSparkComputeRequestPreview": {
            "type": "object",
            "properties": {
                "instancePool": {
                    "description": "Environment pool has to be a valid custom pool. The name for a default workspace pool is *Starter Pool*.",
                    "$ref": "#/definitions/InstancePool",
                    "type": "object"
                },
                "driverCores": {
                    "description": "Spark driver core.",
                    "format": "int32",
                    "type": "integer"
                },
                "driverMemory": {
                    "description": "Spark driver memory.",
                    "type": "string"
                },
                "executorCores": {
                    "description": "Spark executor core.",
                    "format": "int32",
                    "type": "integer"
                },
                "executorMemory": {
                    "description": "Spark executor memory.",
                    "type": "string"
                },
                "dynamicExecutorAllocation": {
                    "description": "Dynamic executor allocation.",
                    "$ref": "#/definitions/DynamicExecutorAllocationProperties"
                },
                "sparkProperties": {
                    "type": "object",
                    "description": "Spark properties. The dictionary-based contract for defining Spark properties will be deprecated on January 31, 2026. Please migrate to using a list of key-value pairs instead."
                },
                "runtimeVersion": {
                    "description": "Runtime version, find the supported [fabric runtimes](/fabric/data-engineering/runtime).",
                    "type": "string"
                }
            }
        },
        "EnvironmentSparkCompute": {
            "type": "object",
            "properties": {
                "instancePool": {
                    "description": "Environment pool has to be a valid custom pool. \"Starter Pool\" means use starter pool.",
                    "$ref": "#/definitions/InstancePool"
                },
                "driverCores": {
                    "description": "Spark driver core. Must be one of the following values: 4, 8, 16, 32, 64.",
                    "format": "int32",
                    "type": "integer"
                },
                "driverMemory": {
                    "description": "Spark driver memory.",
                    "type": "string",
                    "$ref": "#/definitions/CustomPoolMemory"
                },
                "executorCores": {
                    "description": "Spark executor core. Must be one of the following values: 4, 8, 16, 32, 64.",
                    "format": "int32",
                    "type": "integer"
                },
                "executorMemory": {
                    "description": "Spark executor memory.",
                    "type": "string",
                    "$ref": "#/definitions/CustomPoolMemory"
                },
                "dynamicExecutorAllocation": {
                    "description": "Dynamic executor allocation.",
                    "$ref": "#/definitions/DynamicExecutorAllocationProperties"
                },
                "sparkProperties": {
                    "type": "array",
                    "description": "Spark properties.",
                    "items": {
                        "$ref": "#/definitions/SparkProperty"
                    }
                },
                "runtimeVersion": {
                    "description": "Runtime version, find the supported [fabric runtimes](/fabric/data-engineering/runtime). For example: 1.3",
                    "type": "string"
                }
            }
        },
        "UpdateEnvironmentSparkComputeRequest": {
            "type": "object",
            "properties": {
                "instancePool": {
                    "description": "Environment pool has to be a valid custom pool. The name for a default workspace pool is *Starter Pool*.",
                    "$ref": "#/definitions/InstancePool",
                    "type": "object"
                },
                "driverCores": {
                    "description": "Spark driver core. Must be one of the following values: 4, 8, 16, 32, 64.",
                    "format": "int32",
                    "type": "integer"
                },
                "driverMemory": {
                    "description": "Spark driver memory.",
                    "type": "string",
                    "$ref": "#/definitions/CustomPoolMemory"
                },
                "executorCores": {
                    "description": "Spark executor core. Must be one of the following values: 4, 8, 16, 32, 64.",
                    "format": "int32",
                    "type": "integer"
                },
                "executorMemory": {
                    "description": "Spark executor memory.",
                    "type": "string",
                    "$ref": "#/definitions/CustomPoolMemory"
                },
                "dynamicExecutorAllocation": {
                    "description": "Dynamic executor allocation.",
                    "$ref": "#/definitions/DynamicExecutorAllocationProperties"
                },
                "sparkProperties": {
                    "type": "array",
                    "description": "Spark properties.",
                    "items": {
                        "$ref": "#/definitions/SparkProperty"
                    }
                },
                "runtimeVersion": {
                    "description": "Runtime version, find the supported [fabric runtimes](/fabric/data-engineering/runtime). For example: 1.3",
                    "type": "string"
                }
            }
        },
        "CustomPoolMemory": {
            "type": "string",
            "description": "Custom pool memory for Spark driver or Spark executor. Additional `CustomPoolMemory` types may be added over time.",
            "enum": ["28g", "56g", "112g", "224g", "400g"],
            "x-ms-enum": {
                "name": "CustomPoolMemory",
                "modelAsString": true,
                "values": [
                    {
                        "value": "28g",
                        "description": "28GB memory."
                    },
                    {
                        "value": "56g",
                        "description": "56G memory."
                    },
                    {
                        "value": "112g",
                        "description": "112G memory."
                    },
                    {
                        "value": "224g",
                        "description": "224G memory."
                    },
                    {
                        "value": "400g",
                        "description": "400G memory."
                    }
                ]
            }
        },
        "SparkProperty": {
            "type": "object",
            "description": "A Spark property key and its value.",
            "properties": {
                "key": {
                    "description": "The Spark property key.",
                    "type": "string"
                },
                "value": {
                    "description": "The Spark property value.",
                    "type": "string"
                }
            }
        },
        "InstancePool": {
            "type": "object",
            "description": "An instance of a pool.",
            "properties": {
                "id": {
                    "format": "uuid",
                    "description": "Instance pool ID.",
                    "type": "string"
                },
                "name": {
                    "description": "Instance pool name.",
                    "type": "string"
                },
                "type": {
                    "description": "Instance pool type.",
                    "$ref": "#/definitions/CustomPoolType"
                }
            }
        },
        "CustomPoolType": {
            "type": "string",
            "description": "Custom pool type. Additional `CustomPoolType` types may be added over time.",
            "enum": ["Workspace", "Capacity"],
            "x-ms-enum": {
                "name": "CustomPoolType",
                "modelAsString": true,
                "values": [
                    {
                        "value": "Workspace",
                        "description": "Workspace custom pool"
                    },
                    {
                        "value": "Capacity",
                        "description": "Capacity custom pool"
                    }
                ]
            }
        },
        "DynamicExecutorAllocationProperties": {
            "description": "Dynamic executor allocation proerties.",
            "required": [
                "enabled",
                "minExecutors",
                "maxExecutors"
            ],
            "type": "object",
            "properties": {
                "enabled": {
                    "description": "The status of the dynamic executor allocation. False - Disabled, true - Enabled.",
                    "type": "boolean"
                },
                "minExecutors": {
                    "description": "The minimum executor number for dynamic allocation and the minimum for this property is 1. The maximum value has to be lower than `maxExecutors`.",
                    "format": "int32",
                    "type": "integer",
                    "minimum": 1
                },
                "maxExecutors": {
                    "description": "The maximum executor number for dynamic allocation and the minimum for this property is 1. The maximum value has to be lower than the instance pool `maxNodeCount`.",
                    "format": "int32",
                    "type": "integer",
                    "minimum": 1
                }
            }
        },
        "Environments": {
            "description": "A list of environments.",
            "required": ["value"],
            "type": "object",
            "properties": {
                "value": {
                    "description": "A list of environments.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Environment"
                    }
                }
            },
            "allOf": [
                {
                    "$ref": "../common/definitions.json#/definitions/PaginatedResponse"
                }
            ]
        },
        "Environment": {
            "description": "An Environment item.",
            "type": "object",
            "required": ["type"],
            "allOf": [
                {
                    "$ref": "../common/definitions.json#/definitions/Item"
                }
            ],
            "properties": {
                "properties": {
                    "description": "The environment properties.",
                    "$ref": "#/definitions/EnvironmentProperties"
                }
            }
        },
        "CreateEnvironmentRequest": {
            "description": "Create environment request payload.",
            "required": ["displayName"],
            "properties": {
                "displayName": {
                    "description": "The environment display name.",
                    "type": "string",
                    "readOnly": false
                },
                "description": {
                    "description": "The environment description. Maximum length is 256 characters.",
                    "type": "string",
                    "readOnly": false
                },
                "folderId": {
                    "description": "The folder ID. If not specified or null, the environment is created with the workspace as its folder.",
                    "type": "string",
                    "format": "uuid",
                    "readOnly": false
                },
                "definition": {
                    "description": "The environment public definition.",
                    "$ref": "#/definitions/EnvironmentDefinition",
                    "readOnly": false
                }
            }
        },
        "UpdateEnvironmentDefinitionRequest": {
            "description": "Update environment public definition request payload.",
            "required": ["definition"],
            "properties": {
                "definition": {
                    "$ref": "#/definitions/EnvironmentDefinition"
                }
            }
        },
        "EnvironmentDefinitionResponse": {
            "description": "Environment public definition response.",
            "required": ["definition"],
            "properties": {
                "definition": {
                    "$ref": "#/definitions/EnvironmentDefinition",
                    "readOnly": true
                }
            }
        },
        "EnvironmentDefinition" : {
            "description": "Environment public definition object. Refer to this [article](/rest/api/fabric/articles/item-management/definitions/environment-definition) for more details on how to craft a environment public definition.",
            "type": "object",
            "required": ["parts"],
            "properties": {
                "format": {
                    "description": "The format of the Environment definition.",
                    "type": "string",
                    "readOnly": false
                },
                "parts": {
                    "description": "A list of definition parts.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/EnvironmentDefinitionPart"
                    },
                    "readOnly": false
                }
            }
        },
        "EnvironmentDefinitionPart": {
            "description": "Environment definition part object.",
            "type": "object",
            "properties": {
                "path": {
                    "description": "The environment part path.",
                    "type": "string",
                    "readOnly": false
                },
                "payload": {
                    "description": "The environment part payload.",
                    "type": "string",
                    "readOnly": false
                },
                "payloadType":{
                    "description": "The payload type.",
                    "$ref": "../common/definitions.json#/definitions/PayloadType",
                    "readOnly": false
                }
            }
        },
        "UpdateEnvironmentRequest": {
            "description": "Update environment request.",
            "properties": {
                "displayName": {
                    "description": "The environment display name.",
                    "type": "string",
                    "readOnly": false
                },
                "description": {
                    "description": "The environment description. Maximum length is 256 characters.",
                    "type": "string",
                    "readOnly": false
                }
            }
        },
        "EnvironmentProperties": {
            "description": "Environment properties.",
            "type": "object",
            "required": ["publishDetails"],
            "properties": {
                "publishDetails": {
                    "description": "Environment publish operation details.",
                    "$ref": "#/definitions/PublishDetails"
                }
            }
        },
        "PublishDetails": {
            "description": "Details of publish operation.",
            "type": "object",
            "properties": {
                "state": {
                    "description": "Publish state. Additional state types may be added over time.",
                    "type": "string",
                    "enum": ["Success", "Cancelled", "Failed", "Cancelling", "Running", "Waiting"],
                    "x-ms-enum": {
                        "name": "EnvironmentPublishState",
                        "modelAsString": true,
                        "values": [
                            {
                                "value": "Waiting",
                                "description": "Environment publish is in waiting state."
                            },
                            {
                                "value": "Running",
                                "description": "Environment publish is in running state."
                            },
                            {
                                "value": "Cancelling",
                                "description": "Environment publish is in cancelling state."
                            },
                            {
                                "value": "Cancelled",
                                "description": "Environment publish is in cancelled state."
                            },
                            {
                                "value": "Failed",
                                "description": "Environment publish is in failed state."
                            },
                            {
                                "value": "Success",
                                "description": "Environment publish is in success state."
                            }
                        ]
                    }

                },
                "targetVersion": {
                    "description": "Target verion to be published.",
                    "format": "uuid",
                    "type": "string"
                },
                "startTime": {
                    "description": "Start time of publish operation in UTC, using the YYYY-MM-DDTHH:mm:ss.sssssssZ format.",
                    "format": "date-time",
                    "type": "string"
                },
                "endTime": {
                    "description": "End time of publish operation in UTC, using the YYYY-MM-DDTHH:mm:ss.sssssssZ format.",
                    "format": "date-time",
                    "type": "string"
                }, 
                "componentPublishInfo": {
                    "description": "Environment component publish information.",
                    "$ref": "#/definitions/ComponentPublishInfo"
                }
            }
        },
        "ComponentPublishInfo": {
            "description": "Publish info for each components in environment.",
            "type": "object",
            "properties": {
                "sparkLibraries": {
                    "description": "Spark libraries publish information.",
                    "$ref": "#/definitions/SparkLibraries"
                },
                "sparkSettings": {
                    "description": "Spark settings publish information.",
                    "$ref": "#/definitions/SparkSettings"
                }
            }
        },
        "SparkLibraries": {
            "description": "Spark libraries.",
            "type": "object",
            "properties": {
                "state": {
                    "description": "Publish state. Additional state types may be added over time.",
                    "type": "string",
                    "enum": ["Success", "Cancelled", "Failed", "Cancelling", "Running", "Waiting"],
                    "x-ms-enum": {
                        "name": "EnvironmentPublishState",
                        "modelAsString": true,
                        "values": [
                            {
                                "value": "Waiting",
                                "description": "Environment publish is in waiting state."
                            },
                            {
                                "value": "Running",
                                "description": "Environment publish is in running state."
                            },
                            {
                                "value": "Cancelling",
                                "description": "Environment publish is in cancelling state."
                            },
                            {
                                "value": "Cancelled",
                                "description": "Environment publish is in cancelled state."
                            },
                            {
                                "value": "Failed",
                                "description": "Environment publish is in failed state."
                            },
                            {
                                "value": "Success",
                                "description": "Environment publish is in success state."
                            }
                        ]
                    }
                }
            }
        },
        "SparkSettings": {
            "description": "Spark settings.",
            "type": "object",
            "properties": {
                "state": {
                    "description": "Publish state. Additional state types may be added over time.",
                    "type": "string",
                    "enum": ["Success", "Cancelled", "Failed", "Cancelling", "Running", "Waiting"],
                    "x-ms-enum": {
                        "name": "EnvironmentPublishState",
                        "modelAsString": true,
                        "values": [
                            {
                                "value": "Waiting",
                                "description": "Environment publish is in waiting state."
                            },
                            {
                                "value": "Running",
                                "description": "Environment publish is in running state."
                            },
                            {
                                "value": "Cancelling",
                                "description": "Environment publish is in cancelling state."
                            },
                            {
                                "value": "Cancelled",
                                "description": "Environment publish is in cancelled state."
                            },
                            {
                                "value": "Failed",
                                "description": "Environment publish is in failed state."
                            },
                            {
                                "value": "Success",
                                "description": "Environment publish is in success state."
                            }
                        ]
                    }
                }
            }
        },
        "LibraryType": {
            "type": "string",
            "description": "A library type. Additional types may be added over time.",
            "enum": ["Custom", "External"],
            "x-ms-enum": {
                "name": "LibraryType",
                "modelAsString": true,
                "values": [
                    {
                        "value": "Custom",
                        "description": "Custom libraries"
                    },
                    {
                        "value": "External",
                        "description": "External libraries"
                    }
                ]
            }
        },        
        "Libraries": {
            "description": "Environment libraries.",
            "type": "object",
            "properties": {
                "libraries": {
                    "type": "array",
                    "description": "All custom and external libraries (.py, .whl, .jar, .tar.gz and external).",
                    "items": {
                        "$ref": "#/definitions/Library"
                    }
                }
            },
            "allOf": [
                {
                    "$ref": "../common/definitions.json#/definitions/PaginatedResponse"
                }
            ]
        },
        "Library": {
            "description": "Custom or external library.",
            "type": "object",
            "discriminator": "libraryType",
            "required": ["libraryType", "name"],
            "properties": {
                "libraryType": {
                    "$ref": "#/definitions/LibraryType"
                },
                "name": {
                    "type": "string",
                    "description": "The name of library."
                }
            }
        },
        "CustomLibrary": {
            "type": "object",
            "description": "Custom library.",
            "x-ms-discriminator-value": "Custom",
            "allOf": [
                {
                    "$ref": "#/definitions/Library"
                }
            ]
        },
        "ExternalLibrary": {
            "type": "object",
            "description": "External library.",
            "required": ["version"],
            "x-ms-discriminator-value": "External",
            "properties": {
                "version": {
                    "type": "string",
                    "description": "The version of external library."
                }
            },
            "allOf": [
                {
                    "$ref": "#/definitions/Library"
                }
            ]
        },
        "RemoveExternalLibrariesRequest": {
            "type": "object",
            "description": "Request to delete an external library.",
            "required": ["name", "version"],
            "properties": {
                "name": {
                    "type": "string",
                    "description": "The name of library."
                },
                "version": {
                    "type": "string",
                    "description": "The version of external library."
                }
            }
        },
        "LibrariesPreview": {
            "description": "Environment libraries.",
            "type": "object",
            "properties": {
                "customLibraries": {
                    "description": "Custom libraries (.py, .whl, .jar, .tar.gz).",
                    "$ref": "#/definitions/CustomLibraries"
                },
                "environmentYml": {
                    "description": "Feed libraries.",
                    "type": "string"
                }
            }
        },
        "CustomLibraries": {
            "description": "Custom libraries.",
            "type": "object",
            "properties": {
                "wheelFiles": {
                    "type": "array",
                    "description": "A list of Wheel files.",
                    "items": {
                        "type": "string"
                    }
                },
                "pyFiles": {
                    "type": "array",
                    "description": "A list of Python files.",
                    "items": {
                        "type": "string"
                    }
                },
                "jarFiles": {
                    "type": "array",
                    "description": "A list of Jar files.",
                    "items": {
                        "type": "string"
                    }
                },
                "rTarFiles": {
                    "type": "array",
                    "description": "A list of R files.",
                    "items": {
                        "type": "string"
                    }
                }
            }
        }
    }
}
